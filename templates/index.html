{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title> Vehicle & MOT Data</title>

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="{% static 'bootstrap/bootstrap.min.css' %}">
<link rel="stylesheet" href="{% static 'css/style.css' %}">

<style>
  :root {
    --index-primary: #0052CC;
    --accent: #00E5FF;
    --brand-light: #E6F0FF;
    --bg-light: #F4F5F7;
    --white: #ffffff;
    --text-main: #172B4D;
    --text-sub: #6B778C;
    --border: #EBECF0;
    --success: #36B37E;
    --danger: #FF5630;
}

* { box-sizing: border-box; margin: 0; padding: 0; }
  
/* HERO */
.aq-hero { padding: 100px 0; background: radial-gradient(circle at 50% 0%, #E0E7FF 0%, #F8FAFC 70%); }
.aq-badge { display: inline-block; background: var(--brand-light); color: var(--index-primary); padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 700; text-transform: uppercase; margin-bottom: 20px; }
.aq-hero-title { font-size: 48px; font-weight: 800; margin-bottom: 20px; line-height: 1.1; }
.aq-type-area { color: var(--index-primary); }
.aq-cursor { display: inline-block; width: 3px; height: 40px; background: var(--index-primary); margin-left: 4px; vertical-align: middle; animation: blink 1s infinite; }
.aq-subline { font-size: 20px; color: var(--text-sub); margin-bottom: 30px; }

/* CAPABILITIES */
.aq-section-container { padding: 80px 5%; background-color: var(--bg-light); }
.aq-card { border: 1px solid var(--border); border-radius: 12px; padding: 24px; background: var(--white); transition: 0.2s; }
.aq-card:hover { border-color: var(--index-primary); box-shadow: 0 12px 24px rgba(0,0,0,0.05); transform: translateY(-4px); }
.aq-card h3 { font-size: 20px; margin-bottom: 12px; }
.aq-card p { font-size: 15px; color: var(--text-sub); margin-bottom: 20px; }
.aq-cta-link { color: var(--index-primary); text-decoration: none; font-weight: 600; font-size: 14px; display: flex; align-items: center; }

/* HUB */
.aq-hub-section { padding: 100px 5%; background: radial-gradient(circle at 50% 10%, #E0E7FF 10%, #F8FAFC 70%); }
.aq-hub-header { text-align: center; margin-bottom: 50px; }
.aq-tab-nav { display: flex; gap: 10px; margin-bottom: -1px; overflow-x: auto; }
.aq-tab { padding: 14px 28px; background: var(--bg-light); border-radius: 8px 8px 0 0; cursor: pointer; font-weight: 600; font-size: 14px; color: var(--text-sub); border: 1px solid var(--border); white-space: nowrap; transition: 0.2s; }
.aq-tab.active { background: var(--white); color: var(--index-primary); border-bottom-color: var(--white); border-top: 3px solid var(--index-primary); }
.aq-dash-window { background: var(--white); border: 1px solid var(--border); border-radius: 0 12px 12px 12px; box-shadow: 0 20px 40px rgba(0,0,0,0.05); padding: 32px; min-height: 500px; }
.aq-hub-mod { display: block; }
.aq-hidden { display: none; }

/* VEHICLE */
.aq-vehicle-header { display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 20px; margin-bottom: 30px; }
.aq-reg-plate { background: #FFD700; color: black; padding: 5px 15px; border-radius: 4px; font-weight: 800; border: 2px solid black; font-family: monospace; }
.aq-subline-small { font-size: 14px; color: var(--text-sub); }
.aq-badge-ai { background: linear-gradient(90deg, #7000FF, #0052CC); color: white; padding: 4px 10px; border-radius: 100px; font-size: 11px; font-weight: 700; }
.aq-anomaly { color: var(--danger); font-weight: 700; font-size: 14px; margin-top: 5px; }
.aq-table-wrapper { overflow-x: auto; }
.aq-mot-table { width: 100%; border-collapse: collapse; margin-top: 20px; min-width: 600px; }
.aq-mot-table th { text-align: left; padding: 12px; border-bottom: 2px solid var(--bg-light); color: var(--text-sub); font-size: 11px; text-transform: uppercase; }
.aq-mot-table td { padding: 16px 12px; border-bottom: 1px solid var(--border); font-size: 14px; }
.aq-pass { color: var(--success); font-weight: 700; }
.aq-fail { color: var(--danger); font-weight: 700; }

/* FLEET */
.aq-schedule-grid { display: grid; grid-template-columns: 150px 1fr; gap: 10px; margin-top: 20px; }
.aq-driver-name { font-weight: 600; padding: 10px 0; border-bottom: 1px solid var(--bg-light); font-size: 14px; }
.aq-timeline { position: relative; background: var(--bg-light); height: 35px; border-radius: 4px; overflow: hidden; }
.aq-task-bar { position: absolute; height: 100%; background: var(--index-primary); color: white; font-size: 10px; display: flex; align-items: center; padding-left: 10px; border-radius: 4px; }

/* ANALYTICS */
.aq-chart-row { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-top: 30px; width: 100%; }
.aq-chart-label { font-size: 12px; font-weight: 700; color: var(--text-sub); }
.aq-bar-bg { background: var(--bg-light); height: 8px; border-radius: 10px; overflow: hidden; margin-top: 5px; }
.aq-bar-fill { height: 100%; background: var(--index-primary); border-radius: 10px; }
.aq-analytics-card { background: var(--bg-light); border-radius: 12px; padding: 30px; text-align: center; }
.aq-analytics-label { font-size: 11px; font-weight: 700; color: var(--text-sub); }
.aq-analytics-value { font-size: 36px; font-weight: 800; color: var(--index-primary); margin: 10px 0; }
.aq-analytics-change { font-size: 12px; color: var(--success); font-weight: 600; }
.site-logo{
  height: 60px;
  width: auto;
}
/* KEYFRAMES */
@keyframes blink { 0%, 50% { opacity: 1; } 50.01%, 100% { opacity: 0; } }

@media(max-width: 768px){
    .aq-hero, .aq-section-container, .aq-hub-section { padding: 40px 20px; }
    .aq-hero h1 { font-size: 32px; }
    .site-logo{
      height: 30px;
    }
    .aq-chart-row{
      grid-template-columns: 1fr;   
      gap: 15px;
    }

  .aq-analytics-card{
    padding: 20px;
  }
  .navbar .btn-primary{
    width:100%;
    margin-top:8px;
  }
}
/* remove default button border */
.index-nav-toggler{
  border: none;
  background: transparent;
  padding: 6px 10px;
}

/* Hamburger icon */
.index-toggler-icon{
  display: inline-block;
  width: 28px;
  height: 28px;
  background-repeat: no-repeat;
  background-position: center;

  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(0,0,0,0.7)' stroke-width='2' stroke-linecap='round' d='M4 8h22M4 15h22M4 22h22'/%3e%3c/svg%3e");
}

/* Show X when menu is open */
.index-nav-toggler:not(.collapsed) .index-toggler-icon{
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(0,0,0,0.7)' stroke-width='2' stroke-linecap='round' d='M7 7l16 16M23 7L7 23'/%3e%3c/svg%3e");
}
/* Auto offset for sticky navbar */
section[id] {
  scroll-margin-top: var(--nav-height);
}

/* ===============================
   MOBILE FULLSCREEN CARD (CAPABILITIES)
================================ */
@media (max-width: 768px) {
  #capabilities .aq-card h3 {
    font-size: 14px;      /* adjust if needed */
    line-height: 1.2;
    margin-bottom: 0;
    font-weight: 500;
  }

  /* Hide details by default on mobile */
  #capabilities .aq-card p,
  #capabilities .aq-card .aq-cta-link {
    display: none;
  }

  /* Make card tappable */
  #capabilities .aq-card {
    cursor: pointer;
  }

  /* FULLSCREEN STATE */
  #capabilities .aq-card.mobile-active {
    position: fixed;
    inset: 0;
    width: 100vw;
    height: 100vh;
    z-index: 9999;

    background: #ffffff;
    border-radius: 0;
    padding: 32px;

    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  /* Show content when expanded */
  #capabilities .aq-card.mobile-active p,
  #capabilities .aq-card.mobile-active .aq-cta-link {
    display: block;
    margin-top: 16px;
  }

  /* Lock background scroll */
  body.mobile-card-open {
    overflow: hidden;
  }
}






</style>


</head>
<body>
<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top shadow-sm">
  <div class="container">
    <a class="navbar-brand" href="#">
        <img src="{% static 'images/logo.png' %}" alt="AUTiQ" class="site-logo">
    </a>

    <button class="index-nav-toggler collapsed d-lg-none"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#aqNavbar"
        aria-controls="aqNavbar"
        aria-expanded="false"
        aria-label="Toggle navigation">
  <span class="index-toggler-icon"></span>
</button>

    <div class="collapse navbar-collapse" id="aqNavbar">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link active" href="#hero">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="#capabilities">Capabilities</a></li>
        <li class="nav-item"><a class="nav-link" href="#hub">Intelligence Hub</a></li>
        <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
        <li class="nav-item"><a class="btn btn-primary ms-lg-3" href="{% url 'login' %}">Sign In</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- Flash Message Modal -->

<div class="modal fade" id="flashMessageModal" tabindex="-1" aria-labelledby="flashMessageModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered"> 
    <div class="modal-content shadow-lg rounded-4 border-0">
      <div id="flashModalHeader" class="modal-header text-white rounded-top-4" style="background-color: #00E5FF;"> 
        <h5 class="modal-title fw-bold" id="flashMessageModalLabel">Notification</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body text-center"> 
        {% if messages %}
          {% for message in messages %}
            {% if message.tags == "success" %}
              <div class="alert alert-success fw-semibold" role="alert">
                {{ message }}
              </div>
            {% else %}
              <div class="alert alert-danger fw-semibold" role="alert">
                {{ message }}
              </div>
            {% endif %}
          {% endfor %}
        {% endif %}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn-primary px-4 py-2 text-decoration-none rounded-pill" data-bs-dismiss="modal">Ok</button>
      </div>
    </div>
  </div>
</div>



<!-- HERO -->
<section id="hero" class="aq-hero d-flex align-items-center">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-7" data-animate="fade-in-left">
                <span class="aq-badge">Next-Gen Compliance</span>
                <h1 class="aq-hero-title text-start"  >Data-Driven Solutions for <br>
                    <span id="typedText" class="aq-type-area"></span><span class="aq-cursor"></span>
                </h1>
                <p class="aq-subline" >Unified intelligence platform for MOT history, fleet logistics, and regulatory compliance.</p>
                <a href="#contact" class="btn btn-primary btn-lg">Get Started</a>
            </div>
            <div class="col-lg-5 text-center" data-animate="zoom-in">
                <img src="{% static 'images/hero-car-4.jpg'%}" alt="Dashboard Illustration" class="img-fluid mt-4 mt-lg-0 rounded-4 shadow-lg">
            </div>
        </div>
    </div>
</section>

  
<!-- CAPABILITIES -->
<section id="capabilities" class="aq-section-container py-5">
    <div class="container">
        <h2 class="text-center mb-5">Platform Capabilities</h2>
        <div class="row g-4">
            <div class="col-6 col-md-6 col-lg-4" >
                <div class="aq-card h-100">
                    <h3>MOT History</h3>
                    <p>Real-time access to complete DVSA history, including fail points and advisory items.</p>
                </div>
            </div>
            <div class="col-6 col-md-6 col-lg-4" >
                <div class="aq-card h-100">
                    <h3>Fleet Management</h3>
                    <p>Enterprise-grade dashboard for monitoring large-scale vehicle deployments and logistics.</p>
                    
                </div>
            </div>
            <div class="col-6 col-md-6 col-lg-4">
                <div class="aq-card h-100">
                    <h3>Vehicle Details</h3>
                    <p>Comprehensive technical specifications and tax status via direct API integrations.</p>
                    
                </div>
            </div>
            <div class="col-6 col-md-6 col-lg-4">
                <div class="aq-card h-100">
                    <h3>License Check</h3>
                    <p>Automated verification workflows to ensure operator and driver compliance.</p>
                   
                </div>
            </div>
            <div class="col-6 col-md-6 col-lg-4">
                <div class="aq-card h-100">
                    <h3>Trip Logs</h3>
                    <p>Analyze performance metrics and driving behavior to optimize operational costs.</p>
                   
                </div>
            </div>
            <div class="col-6 col-md-6 col-lg-4">
                <div class="aq-card h-100">
                    <h3>Rental Transport</h3>
                    <p>Specialized modules for automotive rental agencies and transport providers.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="aq-hub-section" id="hub">
    <div class="aq-hub-header">
        <h2>Intelligence Hub</h2>
        <p>Experience the live interface for fleet data and AI analysis.</p>
    </div>

    <div class="aq-hub-container">
        <div class="aq-tab-nav">
            <div class="aq-tab active" onclick="switchHubTab('vehicle', this)">Vehicle & MOT Dashboard</div>
            <div class="aq-tab" onclick="switchHubTab('fleet', this)">Fleet Scheduling</div>
            <div class="aq-tab" onclick="switchHubTab('analytics', this)">AI Insights</div>
        </div>

        <div class="aq-dash-window">
            <!-- Vehicle Module -->
            <div id="vehicle-mod" class="aq-hub-mod">
                <div class="aq-vehicle-header">
                    <div>
                        <div class="aq-reg-plate">LV71 XXX</div>
                        <h2>Mercedes-Benz Sprinter 315</h2>
                        <p class="aq-subline-small">Chassis: W1W907... | Euro 6 CI | Next Tax: 01 Nov 2026</p>
                    </div>
                    <div style="text-align: right;">
                        <span class="aq-badge-ai">AI AUDIT ACTIVE</span>
                        <p class="aq-anomaly">Anomaly: +12,400 mi over projection</p>
                    </div>
                </div>
                <div class="aq-table-wrapper">
                    <table class="aq-mot-table">
                        <thead>
                            <tr><th>MOT Test Date</th><th>Mileage</th><th>Result</th><th>Advisories/Notes</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>12 Oct 2025</td><td>84,201 mi</td><td><b class="aq-pass">PASS</b></td><td>Front brake pads wearing thin</td></tr>
                            <tr><td>10 Oct 2024</td><td>42,150 mi</td><td><b class="aq-pass">PASS</b></td><td>Minor oil leak (non-excessive)</td></tr>
                            <tr><td>11 Oct 2023</td><td>18,200 mi</td><td><b class="aq-fail">FAIL</b></td><td>Offside headlamp aim too high</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Fleet Module -->
            <div id="fleet-mod" class="aq-hub-mod aq-hidden">
                <h3>Daily Driver Allocation Schedule</h3>
                <div class="aq-schedule-grid">
                    <div class="aq-driver-name">James Wilson</div>
                    <div class="aq-timeline"><div class="aq-task-bar" style="width: 60%;">Route A-12 (En Route)</div></div>
                    <div class="aq-driver-name">Sarah Chen</div>
                    <div class="aq-timeline"><div class="aq-task-bar" style="width: 30%; left: 45%; background: var(--text-sub);">Scheduled Maintenance</div></div>
                    <div class="aq-driver-name">Marcus Riley</div>
                    <div class="aq-timeline"><div class="aq-task-bar" style="width: 50%; left: 10%; background: var(--success);">Delivery Complete</div></div>
                </div>
            </div>

            <!-- Analytics Module -->
            <div id="analytics-mod" class="aq-hub-mod aq-hidden">
                <h3>Fleet Performance Metrics</h3>
                <div class="aq-chart-row">
                    <div>
                        <p class="aq-chart-label">VAN UTILIZATION</p>
                        <div class="aq-bar-bg"><div class="aq-bar-fill" style="width: 92%;"></div></div>
                        <p class="aq-chart-label" style="margin-top:20px;">HGV UTILIZATION</p>
                        <div class="aq-bar-bg"><div class="aq-bar-fill" style="width: 74%; background: var(--warning);"></div></div>
                    </div>
                    <div class="aq-analytics-card">
                        <div class="aq-analytics-label">AI PREDICTED SAVINGS</div>
                        <div class="aq-analytics-value">£14,200</div>
                        <div class="aq-analytics-change">↑ 12% vs last month</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>



<!-- CONTACT SECTION -->
<section id="contact" class="section-padding bg-light">
  <div class="container">
    <div class="row g-4 align-items-stretch flex-column-reverse flex-lg-row">

      
      <div class="col-lg-7 " data-animate="fade-in-left">
        <div class="card h-100">
          <h2 class="fw-bold mb-3">
            Get in Touch
          </h2>
          <p class="text-muted mb-4">
            Have a question about vehicle details, MOT records, or search results?
            Send us a message and our team will assist you.
          </p>



          <form id="contactForm" method="POST" novalidate>
            {% csrf_token %}

            <div class="row g-3">

              <div class="col-md-6">
                <label class="form-label">Full Name</label>
                <input type="text" name="name" id="name" class="form-control" required>
                <small class="text-danger d-none" id="nameError"></small>
              </div>

              <div class="col-md-6">
                <label class="form-label">Email</label>
                <input type="email" name="email" id="email" class="form-control" required>
                <small class="text-danger d-none" id="emailError"></small>
              </div>

              <div class="col-12">
                <label class="form-label">Company Name <span class="text-muted">(optional)</span></label>
                <input type="text" name="company" class="form-control">
              </div>

              <div class="col-12">
                <label class="form-label">Message</label>
                <textarea name="message" id="message" class="form-control" rows="4" required></textarea>
                <small class="text-danger d-none" id="messageError"></small>
              </div>

              <!-- CAPTCHA -->
              <div class="col-12">
                <label class="form-label">Security Check</label>
                <div class="d-flex gap-2">
                  <input type="text" class="form-control" value="sum of {{ captcha_question }}" disabled>
                  <input type="number" name="captcha_answer" id="captcha" class="form-control" placeholder="Answer" required>
                </div>
                <small class="text-danger d-none" id="captchaError"></small>
              </div>

              <div class="col-12 mt-3">
                <button type="submit" id="submitBtn" class="btn btn-primary w-100">
                  Send Message
                </button>
              </div>

            </div>
          </form>


        </div>
      </div>

     
      <div class="col-lg-5 " data-animate="fade-in-right">
        <div class="card  h-100 d-flex flex-column">
          <!--  LOGOS -->
          <div class="text-center mb-4">
            <small class="text-muted text-uppercase fw-semibold d-block mb-3">
              Supported & Verified By
            </small>

            <div class="brand-row">
              <img src="{% static 'images/dvsa.jpg' %}" alt="DVSA">
              <img src="{% static 'images/dvla.png' %}" alt="DVLA">
              <img src="{% static 'images/BPA.jpg' %}" alt="BPA">
            </div>
          </div>

          <!-- IMAGE -->
          

          <!-- INFO CARDS -->
          <div class="border rounded-3 p-3 mb-3">
            <small class="text-muted d-block">Email Us</small>
            <strong class="text-dark">
              support@vehicleinsights.co.uk
            </strong>
          </div>

          <div class="border rounded-3 p-3 mb-3">
            <small class="text-muted d-block">Call Support</small>
            <strong class="text-dark">
               07854052482
            </strong>
          </div>
          <img
            src="{% static 'images/speed-meter.jpg'%}"
            alt="Vehicle inspection"
            class="img-fluid rounded-3 mb-4">
        </div>
      </div>

    </div>
  </div>
</section>
<script src="{%  static 'js/script.js' %}"></script>
<script src="{% static 'bootstrap/bootstrap.bundle.min.js' %}"></script>
<script>


function setNavHeight() {
  const nav = document.querySelector('.navbar');
  if (!nav) return;

  const height = nav.getBoundingClientRect().height;
  document.documentElement.style.setProperty('--nav-height', height + 'px');
}

// Run on load, resize, and navbar toggle (mobile)
window.addEventListener('load', setNavHeight);
window.addEventListener('resize', setNavHeight);

// Recalculate after Bootstrap collapse animation
document.addEventListener('shown.bs.collapse', setNavHeight);
document.addEventListener('hidden.bs.collapse', setNavHeight);


  // Typing Animation
const aqPhrases = ["VEHICLE LOGISTICS", "MOT COMPLIANCE", "FLEET MANAGEMENT", "RENTAL OPERATIONS"];
const aqTextEl = document.getElementById("typedText");
let aqPhraseIndex = 0, aqCharIndex = 0, aqIsDeleting = false;

function aqTypeLoop() {
    const current = aqPhrases[aqPhraseIndex];
    if (!aqIsDeleting) {
        aqTextEl.textContent = current.slice(0, aqCharIndex + 1);
        aqCharIndex++;
        if (aqCharIndex === current.length) setTimeout(() => aqIsDeleting = true, 2000);
    } else {
        aqTextEl.textContent = current.slice(0, aqCharIndex - 1);
        aqCharIndex--;
        if (aqCharIndex === 0) {
            aqIsDeleting = false;
            aqPhraseIndex = (aqPhraseIndex + 1) % aqPhrases.length;
        }
    }
    setTimeout(aqTypeLoop, aqIsDeleting ? 30 : 60);
}

aqTypeLoop();

// Hub Tab Switching
function switchHubTab(tabId, btn) {
    document.querySelectorAll('.aq-hub-mod').forEach(mod => mod.classList.add('aq-hidden'));
    document.querySelectorAll('.aq-tab').forEach(t => t.classList.remove('active'));
    document.getElementById(`${tabId}-mod`).classList.remove('aq-hidden');
    btn.classList.add('active');
}


const sections = document.querySelectorAll("section[id]");
const navItems = document.querySelectorAll(".navbar-nav .nav-link");

function activateMenu(){
  let scrollPos = window.scrollY + 120;   // adjust offset for navbar

  sections.forEach(section => {
    if(scrollPos >= section.offsetTop && scrollPos < section.offsetTop + section.offsetHeight){
        let id = '#' + section.getAttribute('id');

        navItems.forEach(link => {
            link.classList.toggle('active', link.getAttribute('href') === id);
        });
    }
  });
}

window.addEventListener("scroll", activateMenu);
window.addEventListener("load", activateMenu);


const navLinks = document.querySelectorAll('#aqNavbar .nav-link');
const navbarCollapse = document.getElementById('aqNavbar');

navLinks.forEach(link => {
  link.addEventListener('click', () => {
    const bsCollapse = new bootstrap.Collapse(navbarCollapse, {toggle:false});
    bsCollapse.hide();
  });
});


/* ===============================
   MOBILE CAPABILITIES FULLSCREEN
================================ */
(function () {
  if (window.innerWidth > 768) return; // desktop: do nothing

  const cards = document.querySelectorAll('#capabilities .aq-card');

  cards.forEach(card => {
    card.addEventListener('click', () => {
      const isOpen = card.classList.contains('mobile-active');

      // Close all cards
      cards.forEach(c => c.classList.remove('mobile-active'));
      document.body.classList.remove('mobile-card-open');

      // Open clicked card
      if (!isOpen) {
        card.classList.add('mobile-active');
        document.body.classList.add('mobile-card-open');
      }
    });
  });
})();

function setNavHeight() {
    const nav = document.querySelector('.navbar');
    if (!nav) return;

    const height = nav.offsetHeight;
    document.documentElement.style.setProperty('--nav-height', height + 'px');
  }

  // Run on load and resize
  window.addEventListener('load', setNavHeight);
  window.addEventListener('resize', setNavHeight);




const form = document.getElementById("contactForm");
const btn = document.getElementById("submitBtn");

form.addEventListener("submit", function (e) {
  let valid = true;

  const name = document.getElementById("name");
  const email = document.getElementById("email");
  const message = document.getElementById("message");
  const captcha = document.getElementById("captcha");

  function error(input, msg, id) {
    document.getElementById(id).textContent = msg;
    document.getElementById(id).classList.remove("d-none");
    input.classList.add("is-invalid");
    valid = false;
  }

  function clear(input, id) {
    document.getElementById(id).classList.add("d-none");
    input.classList.remove("is-invalid");
  }

  
  if (name.value.trim() === "") {
    error(name, "Name is required", "nameError");
  } else if (name.value.trim().length < 3 || name.value.trim().length > 15) {
    error(name, "Name must be 3 to 15 characters", "nameError");
  } else {
    clear(name, "nameError");
  }

  
  if (email.value.trim() === "") {
    error(email, "Email is required", "emailError");
  } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email.value.trim())) {
    error(email, "Invalid email address", "emailError");
  } else {
    clear(email, "emailError");
  }

  
  if (message.value.trim() === "") {
    error(message, "Message is required", "messageError");
  } else if (message.value.trim().length < 5) {
    error(message, "Message must be at least 5 characters", "messageError");
  } else {
    clear(message, "messageError");
  }

  
  if (captcha.value.trim() === "") {
    error(captcha, "Captcha is required", "captchaError");
  } else {
    clear(captcha, "captchaError");
  }

  
  if (!valid) {
    e.preventDefault();
    return;
  }

 
  btn.disabled = true;
  btn.innerText = "Sending...";
});




document.addEventListener("DOMContentLoaded", function () {
    let flashModalEl = document.getElementById("flashMessageModal");
    let flashModal = new bootstrap.Modal(flashModalEl);

    // Show modal if there is any alert inside it
    if (flashModalEl.querySelector(".alert")) {
        flashModal.show();
    }
});

</script>



{% include 'footer.html' %}


</body>
</html>
